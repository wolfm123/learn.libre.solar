<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tools &amp; Environment | Building DC Energy Systems</title>
    <meta name="description" content="Open Educational Resource (OER) by Libre Solar to explain how to develop, produce and use components for DC energy systems">
    
    
    <link rel="preload" href="/b/production/assets/css/0.styles.24207cf4.css" as="style"><link rel="preload" href="/b/production/assets/js/app.18221f55.js" as="script"><link rel="preload" href="/b/production/assets/js/2.4db1d2cb.js" as="script"><link rel="preload" href="/b/production/assets/js/32.e0cbe192.js" as="script"><link rel="prefetch" href="/b/production/assets/js/10.a8f52002.js"><link rel="prefetch" href="/b/production/assets/js/11.ee6c05dd.js"><link rel="prefetch" href="/b/production/assets/js/12.dfb9ce95.js"><link rel="prefetch" href="/b/production/assets/js/13.dee24392.js"><link rel="prefetch" href="/b/production/assets/js/14.7f460e8e.js"><link rel="prefetch" href="/b/production/assets/js/15.505c1e4a.js"><link rel="prefetch" href="/b/production/assets/js/16.5e2a1639.js"><link rel="prefetch" href="/b/production/assets/js/17.88b6edea.js"><link rel="prefetch" href="/b/production/assets/js/18.68589325.js"><link rel="prefetch" href="/b/production/assets/js/19.9b96f37c.js"><link rel="prefetch" href="/b/production/assets/js/20.1ebaa8b4.js"><link rel="prefetch" href="/b/production/assets/js/21.535242e1.js"><link rel="prefetch" href="/b/production/assets/js/22.dde01bca.js"><link rel="prefetch" href="/b/production/assets/js/23.c5af6d7e.js"><link rel="prefetch" href="/b/production/assets/js/24.9168c20a.js"><link rel="prefetch" href="/b/production/assets/js/25.5f89f3a3.js"><link rel="prefetch" href="/b/production/assets/js/26.10b6c15b.js"><link rel="prefetch" href="/b/production/assets/js/27.dba362d6.js"><link rel="prefetch" href="/b/production/assets/js/28.0c175a25.js"><link rel="prefetch" href="/b/production/assets/js/29.f1e04091.js"><link rel="prefetch" href="/b/production/assets/js/3.f4b7d810.js"><link rel="prefetch" href="/b/production/assets/js/30.93065635.js"><link rel="prefetch" href="/b/production/assets/js/31.49774c8b.js"><link rel="prefetch" href="/b/production/assets/js/33.370e23a2.js"><link rel="prefetch" href="/b/production/assets/js/34.1c41cf91.js"><link rel="prefetch" href="/b/production/assets/js/35.7dcd429a.js"><link rel="prefetch" href="/b/production/assets/js/36.9b266e2c.js"><link rel="prefetch" href="/b/production/assets/js/37.41f4d280.js"><link rel="prefetch" href="/b/production/assets/js/38.2b4cdb08.js"><link rel="prefetch" href="/b/production/assets/js/39.73b04d0a.js"><link rel="prefetch" href="/b/production/assets/js/4.4a4a390c.js"><link rel="prefetch" href="/b/production/assets/js/40.90a58cc7.js"><link rel="prefetch" href="/b/production/assets/js/41.7884664d.js"><link rel="prefetch" href="/b/production/assets/js/42.f12ec94c.js"><link rel="prefetch" href="/b/production/assets/js/43.75b4b6b5.js"><link rel="prefetch" href="/b/production/assets/js/5.94a567b2.js"><link rel="prefetch" href="/b/production/assets/js/6.4d77b87b.js"><link rel="prefetch" href="/b/production/assets/js/7.66538013.js"><link rel="prefetch" href="/b/production/assets/js/8.9be636a4.js"><link rel="prefetch" href="/b/production/assets/js/9.bef0b0c8.js">
    <link rel="stylesheet" href="/b/production/assets/css/0.styles.24207cf4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/b/production/" class="home-link router-link-active"><!----> <span class="site-name">Building DC Energy Systems</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/b/production/system/" class="nav-link">System Layout</a></div><div class="nav-item"><a href="/b/production/development/" class="nav-link">Component Development</a></div><div class="nav-item"><a href="/b/production/production/" class="nav-link router-link-active">Production</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/b/production/system/" class="nav-link">System Layout</a></div><div class="nav-item"><a href="/b/production/development/" class="nav-link">Component Development</a></div><div class="nav-item"><a href="/b/production/production/" class="nav-link router-link-active">Production</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/b/production/production/roadmap.html" class="sidebar-link">Roadmap</a></li><li><a href="/b/production/production/skills.html" class="sidebar-link">Required Skills</a></li><li><a href="/b/production/production/tools.html" class="active sidebar-link">Tools &amp; Environment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/b/production/production/tools.html#hardware-design" class="sidebar-link">Hardware design</a></li><li class="sidebar-sub-header"><a href="/b/production/production/tools.html#software-development" class="sidebar-link">Software development</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Ordering</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/b/production/production/parts.html" class="sidebar-link">Parts Order Process</a></li><li><a href="/b/production/production/pcbs.html" class="sidebar-link">PCB Manufacturing</a></li><li><a href="/b/production/production/stencil.html" class="sidebar-link">Stencil Creation</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Assembly</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/b/production/production/smd.html" class="sidebar-link">SMD Soldering</a></li><li><a href="/b/production/production/tht.html" class="sidebar-link">THT Soldering</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Testing</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/b/production/production/visual_check.html" class="sidebar-link">Visual Inspection</a></li><li><a href="/b/production/production/eol.html" class="sidebar-link">End-of-line Tests</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="tools-environment"><a href="#tools-environment" class="header-anchor">#</a> Tools &amp; Environment</h1> <p>The <strong>Libre Solar project</strong> is taken as an example for explanation. All the files are open source and can be found on <a href="https://github.com/LibreSolar" target="_blank" rel="noopener noreferrer">GitHub - LibreSolar<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. There is a separate repository for each PCB and an additional repository for the software.</p> <p>Some of the repositories contain git submodules, so please use</p> <div class="language- extra-class"><pre class="language-text"><code>git clone --recursive &lt;repository&gt;
</code></pre></div><p>instead of the <strong>download</strong> button on github.</p> <h2 id="hardware-design"><a href="#hardware-design" class="header-anchor">#</a> Hardware design</h2> <p>Except for some old boards, all Libre Solar electronics hardware is built using the open source PCB design software <a href="http://kicad-pcb.org/" target="_blank" rel="noopener noreferrer">KiCad 5<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>As KiCad version 5 contains lots of interesting new features (better rendering, rounded pads, STEP export and better symbol file format), the Libre Solar PCBs were recently converted to this version. Unfortunately, the files are not compatible with the older KiCad version 4 anymore. Please download the nightly builds or the stable KiCad version 5 as soon as it is released.</p> <p><strong>Custom footprints and symbols are saved in separate repositories</strong>:</p> <ul><li><a href="https://github.com/LibreSolar/KiCad-footprints" target="_blank" rel="noopener noreferrer">https://github.com/LibreSolar/KiCad-footprints<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/LibreSolar/KiCad-symbols" target="_blank" rel="noopener noreferrer">https://github.com/LibreSolar/KiCad-symbols<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>The footprint library is directly included via the github import feature in KiCad. This feature does not exist for the schematics editor, so the schematic symbols are included via a git submodule.</p> <h2 id="software-development"><a href="#software-development" class="header-anchor">#</a> Software development</h2> <p>The firmware for the Libre Solar hardware is developed using the <a href="https://developer.mbed.org/" target="_blank" rel="noopener noreferrer">ARM mbed OS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> embedded software framework. This makes it possible to use easy-to-understand C++ syntax (similar to Arduino) and enhances community based software development.</p> <p><strong>Using Visual Studio Code and <a href="http://platformio.org/" target="_blank" rel="noopener noreferrer">PlatformIO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> as an IDE for software development is recommended</strong>.</p> <p>All Libre Solar software repositories are structured as PlatformIO projects:</p> <div class="language- extra-class"><pre class="language-text"><code>|--lib/
|  |--Foo
|  |  |- Foo.cpp
|  |  |- Foo.h
|  |--Bar
|  |  |- Bar.cpp
|  |  |- Bar.h
|--src/
|  |- config.h
|  |- main.cpp
|- platformio.ini
|- README.md
|- LICENSE
</code></pre></div><p>The main firmware is located in the <code>src</code> folder, external libraries or reuseable code are stored under <code>lib</code>.</p> <p>The platformio.ini file contains some important settings which might have to be adjusted:</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token selector">[env:nucleo]</span>
<span class="token constant">platform</span> <span class="token attr-value"><span class="token punctuation">=</span> ststm32</span>
<span class="token constant">framework</span> <span class="token attr-value"><span class="token punctuation">=</span> mbed</span>
<span class="token constant">board</span> <span class="token attr-value"><span class="token punctuation">=</span> nucleo_f072rb</span>
<span class="token constant">upload_protocol</span> <span class="token attr-value"><span class="token punctuation">=</span> stlink</span>

<span class="token comment"># Settings:</span>
<span class="token comment"># - enable float formatting for printf, adding approx. 7 kB of bin file size</span>
<span class="token comment"># - C++11 to be able to define default values for struct members</span>
<span class="token comment"># - Use low speed internal clock (LSI) for RTC (no LSE crystal on PCB)</span>
<span class="token constant">build_flags</span> <span class="token attr-value"><span class="token punctuation">=</span></span>
    -Wl,-u_printf_float
<span class="token constant">    -std</span><span class="token attr-value"><span class="token punctuation">=</span>c++11</span>
<span class="token constant">    -DMBED_CONF_TARGET_LSE_AVAILABLE</span><span class="token attr-value"><span class="token punctuation">=</span>0</span>

<span class="token comment"># Custom Serial Monitor port</span>
<span class="token comment"># monitor_port = /dev/ttyUSB1</span>

<span class="token comment"># Custom Serial Monitor baud rate</span>
<span class="token constant">monitor_baud</span> <span class="token attr-value"><span class="token punctuation">=</span> 115200</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/LibreSolar/learn.libre.solar/edit/production/docs/production/tools.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/26/2019, 12:21:42 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/b/production/production/skills.html" class="prev">Required Skills</a></span> <span class="next"><a href="/b/production/production/parts.html">Parts Order Process</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/b/production/assets/js/app.18221f55.js" defer></script><script src="/b/production/assets/js/2.4db1d2cb.js" defer></script><script src="/b/production/assets/js/32.e0cbe192.js" defer></script>
  </body>
</html>
